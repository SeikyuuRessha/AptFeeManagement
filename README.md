# ElectronReactApp - Há»‡ Thá»‘ng Quáº£n LÃ½ Chung CÆ°

Há»‡ thá»‘ng quáº£n lÃ½ phÃ­ chung cÆ°/cÄƒn há»™ Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i cÃ¡c cÃ´ng nghá»‡ web hiá»‡n Ä‘áº¡i, cung cáº¥p giao diá»‡n web vÃ  á»©ng dá»¥ng desktop cho giáº£i phÃ¡p quáº£n lÃ½ báº¥t Ä‘á»™ng sáº£n hoÃ n chá»‰nh.

## ğŸ¢ Tá»•ng Quan

"Quáº£n lÃ½ thu phÃ­ chung cÆ°" lÃ  má»™t á»©ng dá»¥ng full-stack Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ tá»‘i Æ°u hÃ³a cÃ¡c hoáº¡t Ä‘á»™ng quáº£n lÃ½ chung cÆ° vÃ  cÄƒn há»™. á»¨ng dá»¥ng cung cáº¥p cÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ cÆ° dÃ¢n, tÃ²a nhÃ , cÄƒn há»™, giao dá»‹ch tÃ i chÃ­nh, Ä‘Äƒng kÃ½ dá»‹ch vá»¥ vÃ  cÃ¡c tÃ¡c vá»¥ quáº£n trá»‹ thÃ´ng qua giao diá»‡n trá»±c quan.

### TÃ­nh NÄƒng ChÃ­nh

-   **ğŸ  Quáº£n LÃ½ Báº¥t Äá»™ng Sáº£n**: Quáº£n lÃ½ cÄƒn há»™ vÃ  tÃ²a nhÃ  hoÃ n chá»‰nh.
-   **ğŸ‘¥ Quáº£n LÃ½ CÆ° DÃ¢n**: Há»“ sÆ¡ cÆ° dÃ¢n vá»›i xÃ¡c thá»±c vÃ  phÃ¢n quyá»n theo vai trÃ².
-   **ğŸ’° Quáº£n LÃ½ TÃ i ChÃ­nh**: Táº¡o hÃ³a Ä‘Æ¡n, theo dÃµi thanh toÃ¡n vÃ  bÃ¡o cÃ¡o tÃ i chÃ­nh.
-   **ğŸ“‹ ÄÄƒng KÃ½ Dá»‹ch Vá»¥**: Quáº£n lÃ½ cÃ¡c dá»‹ch vá»¥ vÃ  Ä‘Äƒng kÃ½ cá»§a tÃ²a nhÃ .
-   **ğŸ”” Há»‡ Thá»‘ng ThÃ´ng BÃ¡o**: ThÃ´ng bÃ¡o tá»± Ä‘á»™ng cho cÃ¡c sá»± kiá»‡n vÃ  cáº­p nháº­t quan trá»ng.
-   **ğŸ“Š PhÃ¢n TÃ­ch & BÃ¡o CÃ¡o**: BÃ¡o cÃ¡o chi tiáº¿t vÃ  phÃ¢n tÃ­ch thÃ´ng tin quáº£n lÃ½.
-   **ğŸŒ Äa Ná»n Táº£ng**: Giao diá»‡n web vÃ  á»©ng dá»¥ng desktop Ä‘á»ƒ truy cáº­p linh hoáº¡t.

## ğŸš€ CÃ´ng Nghá»‡ Sá»­ Dá»¥ng

### Backend

-   **Framework**: NestJS
-   **CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u**: SQL Server vá»›i Prisma ORM
-   **XÃ¡c Thá»±c**: JWT vá»›i kiá»ƒm soÃ¡t truy cáº­p theo vai trÃ²
-   **API**: RESTful APIs vá»›i xÃ¡c thá»±c toÃ n diá»‡n
-   **Testing**: Jest vá»›i coverage test rá»™ng rÃ£i

### Frontend

-   **Framework**: Next.js vá»›i TypeScript
-   **ThÆ° Viá»‡n UI**: Material-UI (MUI)
-   **Quáº£n LÃ½ State**: TanStack Query (React Query)
-   **Styling**: Material-UI theming vá»›i cÃ¡c component tÃ¹y chá»‰nh
-   **Data Fetching**: Axios vá»›i optimistic updates

### á»¨ng Dá»¥ng Desktop

-   **Framework**: ElectronJS
-   **TÃ­ch Há»£p**: Wrapper web-to-desktop liá»n máº¡ch
-   **Äa Ná»n Táº£ng**: Há»— trá»£ Windows, macOS vÃ  Linux

### CÃ´ng Cá»¥ PhÃ¡t Triá»ƒn

-   **NgÃ´n Ngá»¯**: TypeScript
-   **Package Manager**: npm
-   **Database Migration**: Prisma
-   **Testing**: Jest.
-   **Cháº¥t LÆ°á»£ng Code**: ESLint, Prettier

## ğŸ“¦ CÃ i Äáº·t

### YÃªu Cáº§u Há»‡ Thá»‘ng

-   Node.js
-   npm hoáº·c yarn
-   SQL Server

### Clone Repository

```bash
git clone https://github.com/SeikyuuRessha/AptFeeManagement
```

### CÃ i Äáº·t Dependencies

```bash
# CÃ i Ä‘áº·t dependencies gá»‘c
npm install

# CÃ i Ä‘áº·t dependencies backend
cd backend
npm install

# CÃ i Ä‘áº·t dependencies frontend
cd ../frontend
npm install

# Quay vá» thÆ° má»¥c gá»‘c
cd ..
```

### Cáº¥u HÃ¬nh MÃ´i TrÆ°á»ng

1. **Backend Environment** - Táº¡o file `backend/.env`:

```env
DATABASE_URL="sqlserver://localhost:1444;database=apartment_management;user=sa;password=your_password;encrypt=true;trustServerCertificate=true"
JWT_SECRET="your-jwt-secret-key"
JWT_EXPIRES_IN="24h"
PORT=8080
```

2. **Frontend Environment** - Táº¡o file `frontend/.env`:

```env
NEXT_PUBLIC_API_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME="Há»‡ Thá»‘ng Quáº£n LÃ½ Chung CÆ°"
```

### Thiáº¿t Láº­p CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u

```bash
# Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c backend
cd backend

# Táº¡o Prisma client
npx prisma generate

# Cháº¡y database migrations
npx prisma db push

# Seed database (tÃ¹y chá»n)
npx prisma db seed
```

## ğŸ”§ PhÃ¡t Triá»ƒn

### Cháº¡y á»¨ng Dá»¥ng

#### Backend Server

```bash
cd backend
npm run start:dev
```

Backend API sáº½ cÃ³ sáºµn táº¡i `http://localhost:8080`

#### Frontend Application

```bash
cd frontend
npm run dev
```

Frontend sáº½ cÃ³ sáºµn táº¡i `http://localhost:3000`

#### Desktop Application

```bash
# Tá»« thÆ° má»¥c gá»‘c
npm run electron:dev
```

### Build cho Production

#### Backend

```bash
cd backend
npm run build
npm run start:prod
```

#### Frontend

```bash
cd frontend
npm run build
npm start
```

#### Desktop Application

```bash
# Build cho ná»n táº£ng hiá»‡n táº¡i
npm run electron:build

# Build cho ná»n táº£ng cá»¥ thá»ƒ
npm run electron:build:win
npm run electron:build:mac
npm run electron:build:linux
```

## ğŸ§ª Testing

### Backend Tests

```bash
cd backend

# Cháº¡y táº¥t cáº£ tests
npm test

# Cháº¡y tests á»Ÿ cháº¿ Ä‘á»™ watch
npm run test:watch

# Cháº¡y test coverage
npm run test:cov

# Cháº¡y test suites cá»¥ thá»ƒ
npm run test apartment.controller.spec.ts
npm run test auth.service.spec.ts
```

### Frontend Tests

```bash
cd frontend
npm test
```

## ğŸ” XÃ¡c Thá»±c & PhÃ¢n Quyá»n

Há»‡ thá»‘ng triá»ƒn khai xÃ¡c thá»±c dá»±a trÃªn JWT vá»›i kiá»ƒm soÃ¡t truy cáº­p theo vai trÃ²:

### Vai TrÃ² NgÆ°á»i DÃ¹ng

-   **Admin**: ToÃ n quyá»n truy cáº­p vÃ  quáº£n lÃ½ há»‡ thá»‘ng
-   **Resident**: Truy cáº­p háº¡n cháº¿ vÃ o thÃ´ng tin cÃ¡ nhÃ¢n vÃ  thanh toÃ¡n

### Routes ÄÆ°á»£c Báº£o Vá»‡

Táº¥t cáº£ API endpoints Ä‘á»u Ä‘Æ°á»£c báº£o vá»‡ vá»›i cÃ¡c guards phÃ¹ há»£p:

-   JWT authentication Ä‘á»ƒ xÃ¡c minh ngÆ°á»i dÃ¹ng
-   Role-based guards Ä‘á»ƒ kiá»ƒm soÃ¡t quyá»n háº¡n
-   XÃ¡c thá»±c quyá»n sá»Ÿ há»¯u tÃ i nguyÃªn

## ğŸ’¾ Schema CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u

á»¨ng dá»¥ng sá»­ dá»¥ng Prisma ORM vá»›i cÃ¡c entities chÃ­nh sau:

### CÃ¡c Model Cá»‘t LÃµi

-   **User**: NgÆ°á»i dÃ¹ng há»‡ thá»‘ng vá»›i xÃ¡c thá»±c
-   **Building**: CÃ¡c tÃ²a nhÃ  báº¥t Ä‘á»™ng sáº£n
-   **Apartment**: CÃ¡c cÄƒn há»™ riÃªng láº»
-   **Resident**: CÆ° dÃ¢n cÄƒn há»™
-   **Invoice**: HÃ³a Ä‘Æ¡n tÃ i chÃ­nh
-   **Payment**: Báº£n ghi thanh toÃ¡n
-   **Subscription**: ÄÄƒng kÃ½ dá»‹ch vá»¥
-   **Notification**: ThÃ´ng bÃ¡o há»‡ thá»‘ng

### Má»‘i Quan Há»‡

-   TÃ²a nhÃ  cÃ³ nhiá»u CÄƒn há»™
-   CÄƒn há»™ cÃ³ nhiá»u CÆ° dÃ¢n
-   CÆ° dÃ¢n cÃ³ nhiá»u HÃ³a Ä‘Æ¡n vÃ  Thanh toÃ¡n
-   NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ cÃ³ nhiá»u vai trÃ² vÃ  quyá»n háº¡n

## ğŸŒ TÃ i Liá»‡u API

### Authentication Endpoints

```
POST /auth/login          # ÄÄƒng nháº­p ngÆ°á»i dÃ¹ng
POST /auth/register       # ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng
POST /auth/refresh        # LÃ m má»›i token
GET  /auth/profile        # Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng
```

### Quáº£n LÃ½ CÄƒn Há»™

```
GET    /apartments        # Liá»‡t kÃª táº¥t cáº£ cÄƒn há»™
GET    /apartments/:id    # Láº¥y cÄƒn há»™ theo ID
POST   /apartments        # Táº¡o cÄƒn há»™ má»›i
PUT    /apartments/:id    # Cáº­p nháº­t cÄƒn há»™
DELETE /apartments/:id    # XÃ³a cÄƒn há»™
```

### Quáº£n LÃ½ TÃ²a NhÃ 

```
GET    /buildings         # Liá»‡t kÃª táº¥t cáº£ tÃ²a nhÃ 
GET    /buildings/:id     # Láº¥y tÃ²a nhÃ  theo ID
POST   /buildings         # Táº¡o tÃ²a nhÃ  má»›i
PUT    /buildings/:id     # Cáº­p nháº­t tÃ²a nhÃ 
DELETE /buildings/:id     # XÃ³a tÃ²a nhÃ 
```

### Hoáº¡t Äá»™ng TÃ i ChÃ­nh

```
GET    /invoices          # Liá»‡t kÃª hÃ³a Ä‘Æ¡n
POST   /invoices          # Táº¡o hÃ³a Ä‘Æ¡n
GET    /payments          # Liá»‡t kÃª thanh toÃ¡n
POST   /payments          # Ghi nháº­n thanh toÃ¡n
GET    /reports/financial # BÃ¡o cÃ¡o tÃ i chÃ­nh
```

## ğŸ¨ TÃ­nh NÄƒng Frontend

### Báº£ng Äiá»u Khiá»ƒn Admin

-   PhÃ¢n tÃ­ch vÃ  metrics toÃ n diá»‡n
-   Giao diá»‡n quáº£n lÃ½ báº¥t Ä‘á»™ng sáº£n
-   BÃ¡o cÃ¡o tÃ i chÃ­nh vÃ  biá»ƒu Ä‘á»“
-   CÃ´ng cá»¥ quáº£n lÃ½ ngÆ°á»i dÃ¹ng

### Portal CÆ° DÃ¢n

-   Quáº£n lÃ½ thÃ´ng tin cÃ¡ nhÃ¢n
-   Xem hÃ³a Ä‘Æ¡n vÃ  lá»‹ch sá»­ thanh toÃ¡n
-   Quáº£n lÃ½ Ä‘Äƒng kÃ½ dá»‹ch vá»¥
-   Trung tÃ¢m thÃ´ng bÃ¡o

### Thiáº¿t Káº¿ Responsive

-   PhÆ°Æ¡ng phÃ¡p mobile-first
-   Material-UI components
-   Há»— trá»£ theme sÃ¡ng/tá»‘i
-   TuÃ¢n thá»§ accessibility

## ğŸ”§ Cáº¥u HÃ¬nh

### Cáº¥u HÃ¬nh Backend

CÃ¡c file cáº¥u hÃ¬nh chÃ­nh:

-   `backend/src/main.ts`: Application bootstrap
-   `backend/prisma/schema.prisma`: Database schema
-   Biáº¿n mÃ´i trÆ°á»ng cho database vÃ  JWT settings

### Cáº¥u HÃ¬nh Frontend

-   `frontend/next.config.js`: Cáº¥u hÃ¬nh Next.js
-   TÃ¹y chá»‰nh theme Material-UI
-   Cáº¥u hÃ¬nh API client

### Cáº¥u HÃ¬nh Electron

-   `main.js`: Electron main process
-   Quáº£n lÃ½ window vÃ  tÃ­ch há»£p há»‡ thá»‘ng
-   Há»— trá»£ auto-updater

### Biáº¿n MÃ´i TrÆ°á»ng

Äáº£m báº£o táº¥t cáº£ biáº¿n mÃ´i trÆ°á»ng cáº§n thiáº¿t Ä‘Æ°á»£c thiáº¿t láº­p:

-   Database connection strings
-   JWT secrets
-   API endpoints
-   Third-party service keys

## ğŸ¤ ÄÃ³ng GÃ³p

1. Fork repository
2. Táº¡o feature branch: `git checkout -b feature/tinh-nang-moi`
3. Thá»±c hiá»‡n thay Ä‘á»•i vÃ  thÃªm tests
4. Commit thay Ä‘á»•i: `git commit -m 'ThÃªm tÃ­nh nÄƒng má»›i'`
5. Push lÃªn branch: `git push origin feature/tinh-nang-moi`
6. Gá»­i pull request

---

**ÄÆ°á»£c xÃ¢y dá»±ng vá»›i â¤ï¸ cho quáº£n lÃ½ báº¥t Ä‘á»™ng sáº£n hiá»‡n Ä‘áº¡i**
